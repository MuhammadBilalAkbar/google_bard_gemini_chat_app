## 1. Research: Google Bard / Gemini Chat App in Flutter

- Keywords:
    - gemini chat app in flutter
    - How to use gemini chat app in flutter
    - Gemini chat app in flutter example
    - Gemini chat app in flutter github
    - How to use gemini chat app in flutter example
    - Gemini chat app in flutter example pdf
    - Gemini chat app in flutter example github
    - Google generative ai flutter github
    - Google generative ai flutter tutorial
    - Google generative ai flutter example
- Video Title: Google Bard or Gemini Chat Bot App in Flutter with Google Generative AI Package

## 2. Research: Competitors

**Flutter Videos/Articles**

-

29K: https://www.youtube.com/watch?v=oAmIqoGkfIY&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy
-
35K: https://www.youtube.com/watch?v=ltS11XGZ3tc&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy
-
4.1K: https://www.youtube.com/watch?v=uMhfvicLRFw&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy
-
2.5K: https://www.youtube.com/watch?v=VZLyERIzq_A&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy
-
2.1K: https://www.youtube.com/watch?v=HOse25HZyLc&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy
-
3K: https://www.youtube.com/watch?v=ZEII5pmuTYM&pp=ygUkZ29vZ2xlIGdlbmVyYXRpdmUgYWkgcGFja2FnZSBmbHV0dGVy

- 2K: https://www.youtube.com/watch?v=xEpNVxskOuM&pp=ygUaZ2VtaW5pIGNoYXQgYXBwIGluIGZsdXR0ZXI%3D
- https://pub.dev/packages/google_generative_ai
- https://ai.google.dev/tutorials/get_started_dart
- https://www.dhiwise.com/post/how-to-integrate-google-generative-ai-into-your-flutter-projects
- https://blog.stackademic.com/google-generative-ai-in-flutter-a-quickstart-guide-3e5363c3521f
- https://medium.com/flutter-community/how-to-create-a-generative-ai-app-using-gemini-and-flutter-2fc6a66667e5
- https://verygood.ventures/blog/integrating-gemini-ai-with-flutter
- https://ai.google.dev/examples/flutter-theme-agent
- https://www.appwriters.dev/blog/google-generative-ai-with-flutter

- **Android/Swift/React Videos**

-

3.9K: https://www.youtube.com/watch?v=Xp0wRyO0a9g&pp=ygUfZ2VtaW5pIGNoYXQgYXBwIGluIHJlYWN0IG5hdGl2ZQ%3D%3D
-
1.8K: https://www.youtube.com/watch?v=ZXdJ04Q1ksE&pp=ygUfZ2VtaW5pIGNoYXQgYXBwIGluIHJlYWN0IG5hdGl2ZQ%3D%3D
-
507K: https://www.youtube.com/watch?v=_g4BiBcYdZQ&pp=ygUfZ2VtaW5pIGNoYXQgYXBwIGluIHJlYWN0IG5hdGl2ZQ%3D%3D
-
13K: https://www.youtube.com/watch?v=xv9UbWp_Frs&pp=ygUfZ2VtaW5pIGNoYXQgYXBwIGluIHJlYWN0IG5hdGl2ZQ%3D%3D

- 2.2K: https://www.youtube.com/watch?v=X-zs-wa6j28&pp=ygUYZ2VtaW5pIGNoYXQgYXBwIGluIHN3aWZ0
- https://medium.com/@nomannayeem/chat-gemini-building-a-chat-app-with-google-gemini-ai-b48dd1f82b7b
- https://ninza7.medium.com/build-an-ai-chatbot-with-googles-new-gemini-pro-api-react-native-expo-conversational-ai-fa5f03d04368
- https://ai.google.dev/tutorials/get_started_swift
- https://medium.com/google-cloud/text-image-multimodal-streaming-chat-with-gemini-ai-on-ios-with-swiftui-1e1d933cee72
- https://medium.com/@ihridoydas/building-a-chat-app-for-android-using-google-gemini-ai-model-e85de9eba5c2
- https://developer.android.com/studio/preview/gemini-template
- https://getstream.io/blog/android-generative-ai/

**Great Features**

- As a large language model, Gemini excels at providing informative answers and creative text
  formats. It can also process information and respond efficiently, constantly learning and
  improving to better serve you.
- With Google Generative AI package, we can seamlessly integrate features like text generation,
  summarization, and chatbots into our Flutter projects.

**Problems from Videos**

- Q: If I am using Bard in my browser, does that allow me to use Gemini with no further installs or
  signups?
  Ans: yes, if you go to bard, you'll notice that you'll be redirected
  to [gemini.google.com](gemini.google.com). there you can use gemini pro for free but if you want
  to upgrade to gemini advanced which allows you to use gemini ultra, it cost $20/month

**Problems from Flutter Stackoverflow**

- https://stackoverflow.com/questions/78010665/why-dont-my-asyncnotifier-and-asyncnotifierprovider-get-along
- https://stackoverflow.com/questions/72077606/error-in-saving-two-users-chat-in-flutter
- https://stackoverflow.com/questions/66948291/error-in-building-chat-screen-in-flutter-using-firebase
- https://stackoverflow.com/questions/78171698/issue-encountered-with-the-history-parameter-in-the-gemini-ai-integration-within/78172763

## 3. Video Structure

**Main Points / Purpose Of Lesson**

1. In this video, you will learn how to use Google Generative AI Package as chat bot for users to
   question from chat bot.
2. Get API key from [here](https://aistudio.google.com/app/apikey)
3. Next, add google generative ai package.
4. Use it by reading the docs for flutter [here](https://ai.google.dev/tutorials/get_started_dart).
5. This can also be used for simple chat completion, image generation, and Build multi-turn
   conversations.

**The Structured Main Content**

1. Let's create a MessageModel class with `isBot` boolean, and `message` string.
    ```dart
    class MessageModel {
      final bool isBot;
      final String message;
    
      MessageModel(this.isBot, this.message);
    }
    ```
2. In `chat_bot_page.dart` file, I have defined some constants and variables:

    - `kDefault` constant is used for UI.
    - `messageController` is used to control the text field where question is written.
    - `formKey` is used to validate text field.
    - `apiKey` is Gemini secret API key from [here](https://aistudio.google.com/app/apikey).
    - `messages` is list of MessageModel.
    - `isAiTyping` is a boolean to show circular progress indicator when waiting for the answer from
      chat GPT.
    ```dart
      static const kDefault = 15.0;
      final messageController = TextEditingController();
      final formKey = GlobalKey<FormState>();
      final apiKey = 'AIzaSyC38wegJI4lw29sRvt9NcZwyqOX3X5Qgls';
      final messages = [MessageModel(true, 'Hi')];
      bool isAiTyping = false;
    ```
3. You can
   see [here](https://ai.google.dev/tutorials/get_started_dart#generate-text-from-text-input) how to
   send a request and get response.<br/>
   It is very easy through `google_generative_ai` package. <br/>
   Code for sending message to Gemini chat bot is here:

    ```dart
    void sendMessage() async {
      messages.add(
        MessageModel(false, messageController.text),
      );
      setState(() => isAiTyping = true);
    
      final model = GenerativeModel(model: 'gemini-1.0-pro', apiKey: apiKey);
      final content = [Content.text(messageController.text)];
      final response = await model.generateContent(content);
      debugPrint('response.text :${response.text}');
    
      messageController.clear();
      setState(() {
        messages.add(
          MessageModel(true, response.text!),
        );
        isAiTyping = false;
        });
      }
    ```

4. Following is the code for UI:<br/>

   itemBuilder first confirms that if the message in the list of messages is from bot then show bot
   card otherwise show the user card.
    ```dart
      @override
      Widget build(BuildContext context) => Scaffold(
            appBar: AppBar(
              title: const Text('ChatGPT in Flutter'),
              leading: const Padding(
                padding: EdgeInsets.only(left: 10),
                child: CircleAvatar(
                  backgroundImage: AssetImage('Google_Icon.png'),
                ),
              ),
            ),
            body: Form(
              key: formKey,
              child: Column(
                children: [
                  Flexible(
                    child: ListView.builder(
                      itemCount: messages.length,
                      itemBuilder: (context, index) => messages[index].isBot
                          ? botCard(index: index)
                          : userCard(index: index),
                    ),
                  ),
                  Align(
                    alignment: Alignment.bottomCenter,
                    child: Container(
                      width: double.maxFinite,
                      padding: const EdgeInsets.symmetric(
                        horizontal: kDefault,
                        vertical: kDefault / 1.5,
                      ),
                      decoration: BoxDecoration(
                        color: Colors.white,
                        borderRadius: const BorderRadius.only(
                          topRight: Radius.circular(kDefault),
                          topLeft: Radius.circular(kDefault),
                        ),
                        boxShadow: [
                          BoxShadow(
                            color: Colors.black.withOpacity(.23),
                            offset: const Offset(kDefault / 1.2, .5),
                            blurRadius: kDefault,
                          ),
                        ],
                      ),
                      child: Container(
                        decoration: BoxDecoration(
                          color: Colors.grey.withOpacity(.12),
                          borderRadius: BorderRadius.circular(kDefault),
                        ),
                        child: TextFormField(
                          controller: messageController,
                          autofocus: true,
                          decoration: InputDecoration(
                            suffixIcon: isAiTyping
                                ? Transform.scale(
                                    scale: 0.4,
                                    child: const CircularProgressIndicator(
                                      strokeWidth: 7,
                                    ),
                                  )
                                : GestureDetector(
                                    onTap: () {
                                      if (formKey.currentState!.validate()) {
                                        sendMessage();
                                      }
                                    },
                                    child: const Icon(Icons.send,
                                        size: kDefault * 1.6, color: Colors.blue),
                                  ),
                            hintText: 'Enter question here',
                            border: InputBorder.none,
                          ),
                          textInputAction: TextInputAction.send,
                          validator: (value) =>
                              value!.isEmpty ? 'Enter some question' : null,
                        ),
                      ),
                    ),
                  )
                ],
              ),
            ),
          );
    ```

`userCard()` and `botCard()` widgets are almost same:

```dart
  Padding userCard({required int index}) {
  return Padding(
    padding: const EdgeInsets.symmetric(
      horizontal: kDefault,
      vertical: kDefault,
    ),
    child: Stack(
      children: [
        const Align(
          alignment: Alignment.centerRight,
          child: CircleAvatar(
            child: Icon(Icons.person),
          ),
        ),
        Align(
          alignment: Alignment.centerRight,
          child: Container(
            margin: const EdgeInsets.only(
                left: kDefault / 2, right: kDefault * 3.6),
            padding: const EdgeInsets.symmetric(
              horizontal: kDefault / 1.1,
              vertical: kDefault / 1.2,
            ),
            decoration: BoxDecoration(
              color: Colors.white,
              borderRadius: const BorderRadius.only(
                bottomRight: Radius.circular(kDefault * 1.8),
              ),
              boxShadow: [
                BoxShadow(
                  color: Colors.grey.withOpacity(.12),
                  offset: const Offset(.5, kDefault / 1.6),
                  blurRadius: kDefault * 2,
                ),
              ],
            ),
            child: Text(messages[index].message.trim()),
          ),
        ),
      ],
    ),
  );
}

Padding botCard({required int index}) =>
    Padding(
      padding: const EdgeInsets.symmetric(
        horizontal: kDefault,
        vertical: kDefault,
      ),
      child: Stack(
        children: [
          const Align(
            alignment: Alignment.centerLeft,
            child: CircleAvatar(
              backgroundImage: AssetImage('Google_Icon.png'),
              radius: 18,
            ),
          ),
          Align(
            alignment: Alignment.centerLeft,
            child: Container(
              margin: const EdgeInsets.only(
                  right: kDefault / 2, left: kDefault * 3.6),
              padding: const EdgeInsets.symmetric(
                horizontal: kDefault / 1.1,
                vertical: kDefault / 1.2,
              ),
              decoration: BoxDecoration(
                color: Colors.white,
                borderRadius: const BorderRadius.only(
                  bottomLeft: Radius.circular(kDefault * 1.8),
                ),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black.withOpacity(.12),
                    offset: const Offset(kDefault / 1.2, kDefault / 2),
                    blurRadius: kDefault * 2,
                  ),
                ],
              ),
              child: Text(messages[index].message.trim()),
            ),
          ),
        ],
      ),
    );
```
